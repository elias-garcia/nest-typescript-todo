"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const sinon = require("sinon");
const chai_1 = require("chai");
const client_tcp_1 = require("../../client/client-tcp");
describe('ClientTCP', () => {
    const client = new client_tcp_1.ClientTCP({});
    describe('createCallback', () => {
        it(`should return function`, () => {
            chai_1.expect(typeof client.createCallback(null)).to.be.eql('function');
        });
        describe('callback', () => {
            const callback = sinon.spy();
            let fn;
            beforeEach(() => {
                fn = client.createCallback(callback);
            });
            it('should call callback with error when "err" is truthy', () => {
                const error = 'test';
                fn(error, null);
                chai_1.expect(callback.calledWith(error)).to.be.true;
            });
            it('should call callback with response when "err" is not truthy', () => {
                const response = { err: 'test', response: 'restest' };
                fn(null, response);
                chai_1.expect(callback.calledWith(response.err, response.response)).to.be.true;
            });
        });
    });
});
